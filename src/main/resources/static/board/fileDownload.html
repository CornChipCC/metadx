<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Download Test</h1>
    <div class = "download">

    </div>
    


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="../js/scripts.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
        <script src="../js/datatables-simple-demo.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            window.addEventListener("DOMContentLoaded", () => {
                const bno = 12
                axios.get("/board/filelist", {params : {bno : bno}}).then(res => {                                    
                    const files = res.data
                    let fileList = [];
                    console.log(res.data)
                    files.forEach(async (file) => {
                        fileList.push(`
                        <form method="post" action="/board/fileDownload">
                            <input style = "border:0 solid black" type="text" name="fname", value = ${file.fname} readonly>
                            <input type="hidden" name="fuuid", value = ${file.fuuid}>
                            <input type="hidden" name="fdatatype", value = ${file.fdatatype}>
                            <input type="text" name="bno", value = ${file.bno}>
                            <input type="hidden" name="fkey", value = ${file.fkey}>
                            <input type="text" name="user_key">
                            <button> 다운로드 </button>
                            <br>
                        </form>`)
                    })
                    document.querySelector(".download").innerHTML = fileList.join('')
                })
            }, false)
        </script>
</body>
</html>